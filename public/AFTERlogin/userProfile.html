<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>
    <script>
      function doShowPrev(refFile, refImg) {
        const [file] = refFile.files;
        if (file) {
          refImg.src = URL.createObjectURL(file);
        }
      }
    </script>
    <script>
      $(document).ready(function () {
        // Function to check if all required fields are filled
        function checkFormValidity() {
          var isValid = true;

          // Check if the image field is empty
          if ($("#picupload").val() == "") {
            $("#errImg").html("This value is required");
            isValid = false;
          } else {
            $("#errImg").html("");
          }
          // Check if the inputname field is empty
          if ($("#inputname").val() == "") {
            $("#errName").html("This value is required");
            isValid = false;
          } else {
            $("#errName").html("");
          }

          // Check if the inputFName field is empty
          if ($("#inputFName").val() == "") {
            $("#errFName").html("This value is required");
            isValid = false;
          } else {
            $("#errFName").html("");
          }
          // Check if the inputMName field is empty
          if ($("#inputMName").val() == "") {
            $("#errMName").html("This value is required");
            isValid = false;
          } else {
            $("#errMName").html("");
          }
          // Check if the location field is empty
          if ($("#state").val() == "") {
            $("#errstate").html("This value is required");
            isValid = false;
          } else {
            $("#errstate").html("");
          }
          if($("#city").val()=="")
          {
            $("#errcity").html("This value is required");
            isValid=false;
          }else
          {
            $("#errcity").html("");
          }
          // Check if the sex field is empty
          if ($("#sex").val() == "") {
            $("#errSex").html("This value is required");
            isValid = false;
          } else {
            $("#errSex").html("");
          }
          // Check if the date of birth field is empty
          if ($("#dob").val() == "") {
            $("#errDob").html("This value is required");
            isValid = false;
          } else {
            $("#errDob").html("");
          }
          // Check if the marriage status field is empty
          if ($("#marriagestat").val() == "") {
            $("#errMarr").html("This value is required");
            isValid = false;
          } else {
            $("#errMarr").html("");
          }
          // Check if the Religion field is empty
          if ($("#religion").val() == "") {
            $("#errRel").html("This value is required");
            isValid = false;
          } else {
            $("#errRel").html("");
          }
          // Check if the proffesion field is empty
          if ($("#proffession").val() == "") {
            $("#errProf").html("This value is required");
            isValid = false;
          } else {
            $("#errProf").html("");
          }
          // Check if the qualification field is empty
          if ($("#qualification").val() == "") {
            $("#errQual").html("This value is required");
            isValid = false;
          } else {
            $("#errQual").html("");
          }
          // Check if the height field is empty
          if ($("#height").val() == "") {
            $("#errheight").html("This value is required");
            isValid = false;
          } else {
            $("#errheight").html("");
          }
          // Enable or disable the button based on form validity
          $("#btncheck").prop("disabled", !isValid);

          return isValid;
        }

        // Blur event for inputname field
        $("#inputname").blur(function () {
          checkFormValidity();
        });

        // Blur event for inputFName field
        $("#inputFName").blur(function () {
          checkFormValidity();
        });
        // Blur event for inputMName field
        $("#inputMName").blur(function () {
          checkFormValidity();
        });
        // Blur event for location field
        $("#state").blur(function () {
          checkFormValidity();
        });
        $("#city").blur(function () {
          checkFormValidity();
        });
        // Blur event for sex field
        $("#sex").blur(function () {
          checkFormValidity();
        });
        // Blur event for date of birth field
        $("#dob").blur(function () {
          checkFormValidity();
        });
        // Blur event for marriage status field
        $("#marriagestat").blur(function () {
          checkFormValidity();
        });
        // Blur event for religion field
        $("#religion").blur(function () {
          checkFormValidity();
        });
        // Blur event for profeesion field
        $("#proffession").blur(function () {
          checkFormValidity();
        });
        // Blur event for qualification field
        $("#qualification").blur(function () {
          checkFormValidity();
        });
        // Blur event for image field
        $("#picupload").blur(function () {
          checkFormValidity();
        });
        // Blur event for height field
        $("#height").blur(function () {
          checkFormValidity();
        });
        // Click event for the "Create profile" button
        $("#btncheck").click(function () {
          if (checkFormValidity()) {
            // Submit the form if all fields are filled
            $("form").submit();
          } else {
            // Optionally, display a message or take other actions
            console.log("Please fill in all required fields.");
          }
        });
      });
    </script>
    <script>
        $(document).ready(function()
        {
            let user = localStorage.getItem("user");
            $("#emails").val(user);
            $("#btnSearch").click(function () {
          let kuchMail = $("#emails").val();
          let obj = {
            url: "/fetch-one",
            type: "post",
            data: {
              kuchMail: kuchMail,
            },
          };
          $.ajax(obj)
            .done(function (respJsonAry) {
              alert(JSON.stringify(respJsonAry));

              $("#inputname").val(respJsonAry[0].Name); //use table col
              $("#inputFName").val(respJsonAry[0].Fname);
              $("#inputMName").val(respJsonAry[0].Mname);
              $("#state").val(respJsonAry[0].state);
              $("#city").val(respJsonAry[0].city);
              $("#sex").val(respJsonAry[0].sex);
              $("#dob").val(respJsonAry[0].dob);
              parseInt($("#height").val(respJsonAry[0].height));
              $("#religion").val(respJsonAry[0].religion);
              $("#marriagestat").val(respJsonAry[0].marriage);
              $("#manglik").val(respJsonAry[0].manglik);
              $("#proffession").val(respJsonAry[0].prof);
              $("#qualification").val(respJsonAry[0].quali);
              $("#prev").prop("src", "uploads/" + respJsonAry[0].picname);
            })
            .fail(function (err) {
              alert(err);
            });
        });
        })
    </script>
  </head>
  <body>
    <span id="active"></span>
    <div
      class="row justify-content-center align-items-center"
      style="height: 100vh"
    >
      <div class="col-md-9">
        <h5 class="text-center mb-4">Register HERE</h5>

        <div class="card">
          <div class="card-body">
            <form
              class="row g-3"
              action="/form-register"
              method="post"
              enctype="multipart/form-data"
            >
              <center>
                <div class="col-md-12">
                  <label for="picupload" class="form-label">Upload photo</label
                  ><span id="errImg">*</span><br />
                  <input
                    type="file"
                    name="ppic"
                    id="picupload"
                    class="form-label"
                    onchange="doShowPrev(this, prev);"
                  />
                  <img src="" alt="" id="prev" height="100" width="100" />
                </div>
              </center>
              <div class="col-md-9">
                <label for="emails" class="form-label">Email</label>
                <input
                  readonly
                  type="text"
                  class="form-control"
                  id="emails"
                  name="email"
                />
              </div>

              <div class="col-md-3">
                <br />
                <button type="button" class="btn btn-danger" id="btnSearch">
                  Search
                </button>
              </div>
              <div class="col-md-4">
                <label for="inputname" class="form-label">Name</label>
                <span id="errName">*</span>
                <input
                  type="text"
                  class="form-control"
                  id="inputname"
                  name="inputname"
                />
              </div>
              <div class="col-md-4">
                <label for="inputFName" class="form-label">Father Name</label
                ><span id="errFName">*</span>
                <input
                  type="text"
                  class="form-control"
                  id="inputFName"
                  name="inputFName"
                />
              </div>
              <div class="col-md-4">
                <label for="inputMName" class="form-label"> Mother Name</label
                ><span id="errMName">*</span>
                <input
                  type="text"
                  class="form-control"
                  id="inputMName"
                  name="inputMName"
                />
              </div>
              <div class="col-md-4">
                <label for="state" class="form-label">State</label
                ><span id="errstate">*</span>
                <!--- India states -->
                <select id="state" name="state" class="form-select">
                  <option value="">Select state</option>
                  <option value="AN">Andaman and Nicobar Islands</option>
                  <option value="AP">Andhra Pradesh</option>
                  <option value="AR">Arunachal Pradesh</option>
                  <option value="AS">Assam</option>
                  <option value="BR">Bihar</option>
                  <option value="CH">Chandigarh</option>
                  <option value="CT">Chhattisgarh</option>
                  <option value="DN">Dadra and Nagar Haveli</option>
                  <option value="DD">Daman and Diu</option>
                  <option value="DL">Delhi</option>
                  <option value="GA">Goa</option>
                  <option value="GJ">Gujarat</option>
                  <option value="HR">Haryana</option>
                  <option value="HP">Himachal Pradesh</option>
                  <option value="JK">Jammu and Kashmir</option>
                  <option value="JH">Jharkhand</option>
                  <option value="KA">Karnataka</option>
                  <option value="KL">Kerala</option>
                  <option value="LA">Ladakh</option>
                  <option value="LD">Lakshadweep</option>
                  <option value="MP">Madhya Pradesh</option>
                  <option value="MH">Maharashtra</option>
                  <option value="MN">Manipur</option>
                  <option value="ML">Meghalaya</option>
                  <option value="MZ">Mizoram</option>
                  <option value="NL">Nagaland</option>
                  <option value="OR">Odisha</option>
                  <option value="PY">Puducherry</option>
                  <option value="PB">Punjab</option>
                  <option value="RJ">Rajasthan</option>
                  <option value="SK">Sikkim</option>
                  <option value="TN">Tamil Nadu</option>
                  <option value="TG">Telangana</option>
                  <option value="TR">Tripura</option>
                  <option value="UP">Uttar Pradesh</option>
                  <option value="UT">Uttarakhand</option>
                  <option value="WB">West Bengal</option>
                </select>
              </div>
              <div class="col-md-4">
                <label for="city" class="form-label">City</label
                ><span id="errcity">*</span>
                <input type="text" class="form-control" id="city" name="city" />
              </div>
              <div class="col-md-4">
                <label for="sex" class="form-label">Sex</label
                ><span id="errSex">*</span>
                <select id="sex" class="form-select" name="sex">
                  <option>select</option>
                  <option>Male</option>
                  <option>Female</option>
                </select>
              </div>
              <div class="col-md-4">
                <label for="dob" class="form-label">date of birth</label
                ><span id="errDob">*</span>
                <input type="date" class="form-control" id="dob" name="dob" />
              </div>
              <div class="col-md-4">
                <label for="height" class="form-label">Height(in inches)</label
                ><span id="errheight">*</span>
                <input
                  type="number"
                  class="form-control"
                  id="height"
                  name="height"
                />
              </div>
              <div class="col-md-4">
                <label for="religion" class="form-label">Religion</label
                ><span id="errRel">*</span>
                <select name="religion" id="religion" class="form-select">
                  <option value="" selected="selected" disabled="disabled">
                    Select
                  </option>
                  <option value="Aggarwal">Aggarwal</option>
                  <option value="Jatt Sikh">Jatt Sikh</option>
      
                  <option value="Other">Other</option>
                </select>
              </div>
              <div class="col-md-4">
                <label for="marriagestat" class="form-label"
                  >Marriage status</label
                ><span id="errMarr">*</span>
                <select
                  name="marriagestat"
                  id="marriagestat"
                  class="form-select"
                >
                  <option value="">Select</option>
                  <option value="Single">Single</option>
                  <option value="Married">Married</option>
                  <option value="Widowed">Widowed</option>
                  <option value="Separated">Separated</option>
                  <option value="Divorced">Divorced</option>
                </select>
              </div>
              <div class="col-md-4">
                <label for="manglik" class="form-label">Manglik status</label>
                <select name="manglik" id="manglik" class="form-select">
                  <option value="">Select</option>
                  <option value="yes">YES</option>
                  <option value="no">NO</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="proffession" class="form-label">Proffession</label
                ><span id="errProf">*</span>
                <textarea
                  id="proffession"
                  name="proffession"
                  class="form-control"
                ></textarea>
              </div>
              <div class="col-md-6">
                <label for="qualification" class="form-label"
                  >Qualification</label
                ><span id="errQual">*</span>
                <textarea
                  id="qualification"
                  name="qualification"
                  class="form-control"
                ></textarea>
              </div>
              <div class="col-12">
                <button type="submit" class="btn btn-danger" id="btncheck">
                  Create profile
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
